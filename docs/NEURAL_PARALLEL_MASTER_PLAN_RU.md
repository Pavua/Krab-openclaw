<!--
Этот документ — главный протокол параллельной разработки с несколькими нейронками.
Нужен, чтобы внешние агенты работали параллельно без конфликтов, а финальная интеграция
всегда проходила через единый контроль качества в Krab.
Связан с docs/parallel_execution_split_v8.md, scripts/check_workstream_overlap.py и scripts/merge_guard.py.
-->

# Master Plan: Параллельная разработка с несколькими нейронками

## Цель

Организовать работу нескольких нейронок так, чтобы они:
1. не конфликтовали по файлам и ответственности;
2. выполняли только четко назначенные задачи;
3. сдавали результат в едином формате;
4. проходили обязательную приёмку и интеграцию через Codex-гейт.

## Роли

1. **Codex (Главный интегратор)**:
   - выдает задачи и границы;
   - принимает отчеты и патчи;
   - запускает контрольные проверки;
   - решает: `accept / request changes / reject`;
   - выполняет итоговую интеграцию в проект.
2. **Worker-нейронки (исполнители)**:
   - работают только в назначенной зоне;
   - не трогают чужие зоны и системные контракты;
   - сдают работу только по шаблону отчета.

## Жесткие правила без конфликтов

1. Каждой нейронке выдается собственный task-пакет и собственная ветка.
2. Изменения вне зоны ownership запрещены.
3. Любой overlap по ownership = автоматический stop до разведения.
4. Любая интеграция идет только после проверок:
   - `python3 scripts/check_workstream_overlap.py`
   - `python3 scripts/merge_guard.py`
5. Финальный merge выполняет только Codex после review.

## Стандартный цикл работы

1. **Briefing**: выдать агенту task-пакет (цель, scope, DoD, тесты).
2. **Execution**: агент реализует и запускает только назначенные проверки.
3. **Delivery**: агент сдает короткий отчет в фиксированном формате.
4. **Acceptance**: Codex гоняет overlap + merge guard + целевые тесты.
5. **Integration**: Codex объединяет только принятые изменения.

## Формат сдачи от внешней нейронки

1. Что изменено (файлы + зачем).
2. Какие тесты запущены (точные команды).
3. Результаты тестов (pass/fail).
4. Риски и ограничения.
5. Что осталось доделать.

## Правило приёмки (Codex gate)

Работа считается принятой только если:
1. нет overlap конфликтов;
2. merge guard зеленый;
3. целевые тесты зеленые;
4. поведение проверено на реальном сценарии;
5. документация обновлена, если изменен публичный workflow.

## One-click команды

1. Подготовить task-пакет для внешних нейронок:
   - `./prepare_parallel_agent_pack.command`
2. Запустить гейт приёмки перед интеграцией:
   - `./review_parallel_delivery.command`
3. Полный гейт (включая расширенный smoke):
   - `./review_parallel_delivery.command --full`

