# Frontend R8: Hand-off & Visual Polish

## 1. Введение
Данный документ описывает завершение этапа визуальной полировки и адаптивной верстки (Frontend R8) прототипов интерфейса **Krab Web Panel V2**. Прототипы полностью лишены внешних зависимостей (кроме Google Fonts) и готовы к интеграции с бэкендом (Jinja2/React/Vue).

## 2. Унифицированные дизайн-токены (`nano_theme.css`)
Вся цветовая схема, типографика и отступы вынесены в CSS-переменные в файл `nano_theme.css`.

- **Цвета (`--bg-body`, `--bg-panel`):** Поддержка темного фона с мягкими градиентами.
- **Интерактивные элементы:** Поддержка состояний `:hover`, `:focus-visible`, `:active`, `:disabled` для кнопок (`button`, `.primary`) и элементов формы (`.field`).
- **Состояния системы (States):** Унифицированные цвета для алертов и статусов (`--state-ok`, `--state-warn`, `--state-bad`, `--state-purple`).
- **Анимации:** Утилиты `.pulse-ok`, `.pulse-error` и `.pulse-warn` для индикации статусов. 

## 3. Макеты и брейкпоинты
Адаптивность (Responsive Polish) контролируется через медиа-запросы как в `nano_theme.css`, так и локально в прототипах:

- **< 900px / 1000px:** Перестроение колонок (Grid -> 1 column) для карточек и графиков Dashboard и Ops Center.
- **< 768px:** Уменьшение глобальных отступов (`body padding: 12px; `).
- **< 430px:** Уменьшение размеров шрифтов для заголовков (`h1` до `1.5rem`). Выстраивание шапки в колонку.
- **< 390px:** Устранение `overflow` и минимизация отступов (`body padding: 8px`). Увеличение размера шрифта для `<button>` и `<input>` для удобных "touch targets" (минимум 1rem ~ 16px).

## 4. Читабельность данных (Data Readability)
- **Таблицы и Логи:** В `ops_center.html` и `index_redesign.html` длиные строки (например, IDs токенов, логи) автоматически переносятся с помощью `.word-wrap` или `.break-word`.
- **Пустые состояния:** Все пустые состояния (`.empty-state`) снабжены иконкой и поясняющим текстом с пониженным контрастом (`--text-muted`).

## 5. Доступность (a11y)
- **Контрастность:** Текст имеет достаточный контраст на фоне панелей.
- **ARIA-атрибуты:** Важные элементы содержат `aria-label`, живые обновления оборачиваются в атрибуты `aria-live="polite"`.
- **Keyboard Navigation:** Обеспечены фокус-ринги (focus rings) для `button` и `.field` (`:focus-visible`).

## 6. Риски при интеграции
1. Изменение DOM-структуры может сломать селекторы CSS. Желательно использовать предоставленные классы (напр., `.card`, `.field`, `.primary`, `.empty-state`).
2. Очищение HTML-структуры под React или Vue потребует аккуратного переноса классов и атрибутов ARIA, так как в прототипах логика реализована на ванильном Javascript с прямыми манипуляциями DOM.
3. Убедиться, что при внедрении фреймворков не будет конфликтов с глобальными стилями тэгов. Рекомендуется подключить `nano_theme.css` в `<head>` до компонентных стилей.

## 7. Чек-лист передачи
- [x] Все три прототипа проверены в десктопном браузере (Chromium/Safari).
- [x] Отсутствуют горизонтальные скроллы на экранах < 390px.
- [x] CSS вынесен в один файл (`nano_theme.css`).
- [x] Доступность (aria-label, tabindex, contrast, focus) проверена на всех интерактивных элементах.
- [x] Стили состояний `:active`, `:disabled`, `:hover` присутствуют.
- [x] Путеводитель `hand-off` составлен.
