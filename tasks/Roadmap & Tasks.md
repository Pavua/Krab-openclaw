# **ü¶Ä Krab v2.0 Implementation Roadmap**

**Status:** Active  
**Priority:** High  
**Base PRD:** docs/PRD\_Krab\_Ultimate.md
**Last Updated:** 2026-02-10

## **üü¢ Phase 1: Foundation (The Brain & Memory)** ‚úÖ

*–¶–µ–ª—å: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç "–¥—É–º–∞—Ç—å" (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã) –∏ "–ø–æ–º–Ω–∏—Ç—å" (—Ä–∞–∑–¥–µ–ª—è—Ç—å —á–∞—Ç—ã).*

* [x] **Task 1.1: Environment & Dependencies**  
* [x] **Task 1.2: Hybrid Model Router (src/core/model_manager.py)**  
* [x] **Task 1.3: Context Isolation Engine (src/core/context_manager.py)**  
* [x] **Task 1.4: Orchestrator Core (src/main.py)**  

## **üü¢ Phase 2: Perception (Ears & Eyes)** ‚úÖ

*–¶–µ–ª—å: –ù–∞—É—á–∏—Ç—å –±–æ—Ç–∞ —Å–ª—ã—à–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ –∏ –≤–∏–¥–µ—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏.*

* [x] **Task 2.1: Perceptor Module Setup**  
* [x] **Task 2.2: KrabEar (Audio/STT)** ‚Äî MLX Whisper + —Ä—É—Å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
* [x] **Task 2.3: Vision Engine** ‚Äî HEIC –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è + Gemini Vision

## **üü¢ Phase 3: Advanced Features** ‚úÖ

*–¶–µ–ª—å: –ê–≤—Ç–æ–Ω–æ–º–∏—è –∏ —É–¥–æ–±—Å—Ç–≤–æ.*

* [x] **Task 3.1: Smart Auto-Reply**  
  * [x] –ê–≤—Ç–æ-–æ—Ç–≤–µ—Ç –Ω–∞ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞.
  * [x] –ê–≤—Ç–æ-–æ—Ç–≤–µ—Ç –Ω–∞ –≥–æ–ª–æ—Å–æ–≤—ã–µ (V2R: Voice-to-Reply).
  * [x] –ê–≤—Ç–æ-–æ—Ç–≤–µ—Ç –Ω–∞ —Ñ–æ—Ç–æ (Vision-to-Reply).
* [x] **Task 3.2: System Hardening**  
  * [x] `start_krab.command` ‚Äî –∑–∞–ø—É—Å–∫ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫.
  * [x] `stop_krab.command` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫.
  * [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `logs/krab.log`.
  * [x] PID-—Ñ–∞–π–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º.
* [x] **Task 3.3: Content Analysis (Summarizer)**
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!summary` ‚Äî –¥–∞–π–¥–∂–µ—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Å–æ–æ–±—â–µ–Ω–∏–π.
* [x] **Task 3.4: Active Voice (TTS)**
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!say` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —á–µ—Ä–µ–∑ macOS `say` + ffmpeg ‚Üí OGG.
  * [x] –ì–æ–ª–æ—Å: Milena (Russian).
* [x] **Task 3.5: Translator**
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!translate` ‚Äî –∞–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ (RU‚ÜîEN).
  * [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 11 —è–∑—ã–∫–æ–≤ —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º.
* [x] **Task 3.6: Diagnostics**
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!diagnose` ‚Äî CPU, RAM, Disk, AI –º–æ–¥—É–ª–∏, –ø–∞–º—è—Ç—å —á–∞—Ç–∞.
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!status` ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ AI.
* [x] **Task 3.7: Code Generation**
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!code` ‚Äî AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è Python –∫–æ–¥–∞ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é –∑–∞–¥–∞—á–∏.
* [x] **Task 3.8: Python REPL**
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!exec` ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python –∫–æ–¥–∞ (—Ç–æ–ª—å–∫–æ Owner).
* [x] **Task 3.9: Help System**
  * [x] –ö–æ–º–∞–Ω–¥–∞ `!help` ‚Äî –ø–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º.
* [x] **Task 3.10: Whisper Optimization**
  * [x] –ü—Ä–æ–º–ø—Ç-–ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ (–∏–∑ KrabEar v4.7).
  * [x] –§–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏ `temperature=0.0`.

## **üü° Phase 4: Next Level** (Planned)

*–¶–µ–ª—å: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.*

* [ ] **Task 4.1: Inline Keyboard Buttons**
  * [ ] –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –≤ –æ—Ç–≤–µ—Ç–∞—Ö (–û–±–Ω–æ–≤–∏—Ç—å, –ü–æ–¥—Ä–æ–±–Ω–µ–µ).
* [ ] **Task 4.2: Scheduled Digest**
  * [ ] –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —É—Ç—Ä–µ–Ω–Ω—è—è —Å–≤–æ–¥–∫–∞ (cron/scheduler).
* [ ] **Task 4.3: Web Dashboard**
  * [ ] Streamlit –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–ø—Ä–æ—Ç–æ—Ç–∏–ø –≤ scratch/).
* [ ] **Task 4.4: RAG (Retrieval Augmented Generation)**
  * [ ] –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ ChromaDB.
  * [ ] –û—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
* [ ] **Task 4.5: Multi-Agent System**
  * [ ] –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã (Analyst, Coder, Scout).
  * [ ] –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏.
* [ ] **Task 4.6: GitHub Integration**
  * [ ] –ö–æ–º–∞–Ω–¥–∞ `!commit` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–º–∏—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

## **üìä –¢–µ—Å—Ç—ã**

| –ù–∞–±–æ—Ä | –°—Ç–∞—Ç—É—Å | –ö–æ–ª-–≤–æ |
|-------|--------|--------|
| ContextKeeper | ‚úÖ Passed | 4/4 |
| Perceptor | ‚úÖ Passed | 2/2 |
| **–ò—Ç–æ–≥–æ** | **‚úÖ All Green** | **6/6** |

## **üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ (v2.0)**

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ—Å—Ç—É–ø |
|---------|----------|--------|
| `!status` | –°—Ç–∞—Ç—É—Å AI —Å–∏—Å—Ç–µ–º | All |
| `!diagnose` | –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | All |
| `!help` | –°–ø—Ä–∞–≤–∫–∞ | All |
| `!summary` | –°–∞–º–º–∞—Ä–∏ 100 —Å–æ–æ–±—â–µ–Ω–∏–π | All |
| `!translate` | –ê–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥ RU‚ÜîEN | All |
| `!say` | –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (TTS) | All |
| `!code` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Python –∫–æ–¥–∞ | All |
| `!exec` | Python REPL | Owner only |